<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Donut Chart with Sections and Subsections</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #container {
            width: 70%;
            height: 600px;
            margin: 50px auto;
        }
        .subsection-chart {
            width: 250px;
            height: 250px;
            margin: 30px auto;
            display: none;
        }
        .instruction-message {
            font-size: 16px;
            font-weight: bold;
            color: #FF5733;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1>3D Donut Chart with Sections and Subsections</h1>

<!-- Instruction Message -->
<div class="instruction-message">
    Hover or Click on a section to view its subsections.
</div>

<!-- Main Donut Chart -->
<div id="container"></div>

<!-- Subsection Donut Charts -->
<div id="dataScienceSubsection" class="subsection-chart"></div>
<div id="machineLearningSubsection" class="subsection-chart"></div>
<div id="aiTechniquesSubsection" class="subsection-chart"></div>
<div id="interdisciplinarySubsection" class="subsection-chart"></div>

<script>
// Main Donut Chart (Center 3D Chart)
Highcharts.chart('container', {
    chart: {
        type: 'pie',
        options3d: {
            enabled: true,
            alpha: 45,
            beta: 0
        },
        events: {
            load: function () {
                // Rotate the chart slowly
                var chart = this;
                setInterval(function () {
                    chart.update({
                        chart: {
                            options3d: {
                                alpha: (chart.options.chart.options3d.alpha + 0.5) % 360
                            }
                        }
                    });
                }, 50); // Slow rotation
            }
        }
    },
    title: {
        text: 'Main Research Breakdown'
    },
    plotOptions: {
        pie: {
            innerSize: 100,
            depth: 45,
            dataLabels: {
                enabled: true,
                format: '{point.name}: {point.percentage:.1f}%',
                style: {
                    color: 'black',
                    fontWeight: 'bold'
                }
            },
            allowPointSelect: true,
            cursor: 'pointer',
            showInLegend: true
        }
    },
    tooltip: {
        useHTML: true,
        headerFormat: '<span style="font-size: 14px; font-weight: bold;">{point.key}</span><br>',
        pointFormat: '<span style="color:{point.color}">‚óè</span> {point.name}: {point.y}%<br>',
        footerFormat: '<b>Total: {point.total}%</b>'
    },
    series: [{
        name: 'Research Breakdown',
        data: [
            { name: 'Data Science Techniques', y: 30, sliced: true, selected: true, drilldown: 'dataScience' },
            { name: 'Machine Learning Techniques', y: 40, drilldown: 'machineLearning' },
            { name: 'AI Techniques', y: 20, drilldown: 'aiTechniques' },
            { name: 'Interdisciplinary Applications', y: 10, drilldown: 'interdisciplinary' }
        ]
    }],
    exporting: {
        enabled: true,
        buttons: {
            contextButton: {
                symbol: 'export',
                menuItems: ['downloadPNG', 'downloadJPEG', 'downloadPDF', 'downloadSVG']
            }
        }
    },
    // On hover or click display the respective subsection chart
    plotOptions: {
        pie: {
            events: {
                mouseOver: function () {
                    var subsectionId = this.drilldown;
                    showSubsectionChart(subsectionId);
                },
                mouseOut: function () {
                    hideAllSubsectionCharts();
                }
            }
        }
    }
});

// Data for Subsection Charts
const dataScienceSubsection = [
    ['Text Collection', 10],
    ['Preprocessing', 8],
    ['Feature Extraction', 12]
];

const machineLearningSubsection = [
    ['Supervised Learning', 15],
    ['Unsupervised Learning', 10],
    ['Deep Learning', 10],
    ['NLP Tasks', 5]
];

const aiTechniquesSubsection = [
    ['NLG', 10],
    ['AI for Education', 5],
    ['Semantic Analysis', 3],
    ['Symbolic AI', 2]
];

const interdisciplinarySubsection = [
    ['Programming Language Design', 5],
    ['Cultural Preservation', 5]
];

// Create Subsection Charts
function createSubsectionChart(containerId, data) {
    Highcharts.chart(containerId, {
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 45,
                beta: 0
            }
        },
        title: {
            text: 'Subsection Breakdown'
        },
        plotOptions: {
            pie: {
                innerSize: 80,
                depth: 45,
                dataLabels: {
                    enabled: true,
                    format: '{point.name}: {point.percentage:.1f}%',
                    style: {
                        color: 'black',
                        fontWeight: 'bold'
                    }
                },
                allowPointSelect: true,
                cursor: 'pointer'
            }
        },
        series: [{
            name: 'Subsection Breakdown',
            data: data
        }],
        exporting: {
            enabled: true
        }
    });
}

// Create Subsection Charts
createSubsectionChart('dataScienceSubsection', dataScienceSubsection);
createSubsectionChart('machineLearningSubsection', machineLearningSubsection);
createSubsectionChart('aiTechniquesSubsection', aiTechniquesSubsection);
createSubsectionChart('interdisciplinarySubsection', interdisciplinarySubsection);

// Show respective subsection chart
function showSubsectionChart(subsectionId) {
    hideAllSubsectionCharts();
    document.getElementById(subsectionId + 'Subsection').style.display = 'block';
}

// Hide all subsection charts
function hideAllSubsectionCharts() {
    document.getElementById('dataScienceSubsection').style.display = 'none';
    document.getElementById('machineLearningSubsection').style.display = 'none';
    document.getElementById('aiTechniquesSubsection').style.display = 'none';
    document.getElementById('interdisciplinarySubsection').style.display = 'none';
}

</script>
</body>
</html>
